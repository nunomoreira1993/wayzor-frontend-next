// About page specific styles
// Uses shared variables, header, layout, footer partials already imported in about.scss


.page-about {
	background:#fff;
	font-family:$font-base;
	color:$color-dark-strong;
}

// Hero
.about-hero {
	position:relative;
	width:100%;
	height:520px;
	overflow:hidden;

	&__img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
	&__overlay { position:absolute; inset:0; }
	&__content { position:relative; z-index:2; height:100%; display:flex; align-items:flex-end; justify-content:flex-start; }
	&__inner { width:100%; max-width:$container-max; margin:0 auto; padding:0 2rem; position:relative; display:flex; }
	&__text { position:relative; display:flex; flex-direction:column; gap:4px; align-self:flex-end; margin-bottom:250px; }

@media (max-width:1023.98px) {
	.about-hero__text { margin-bottom:160px; padding-right:1rem; }
	.about-hero__title { font-size:48px; }
}

@media (max-width:639.98px) {
	.about-hero__text { margin-bottom:120px; padding-right:0.5rem; }
	.about-hero__title { font-size:38px; }
}
	&__title { font-family:$font-base; font-size:64px; font-weight:700; line-height:110%; color:$color-white; font-feature-settings:'liga' off,'clig' off; margin:0; }
	&__subtitle { font-family:$font-base; font-size:18px; font-weight:500; line-height:100%; color:$color-white; font-feature-settings:'liga' off,'clig' off; margin:0; }
}

// Layout container for about content
.about-main { max-width:1680px; margin:0 auto; padding:4rem 1rem 6rem; }
@media (min-width:1024px){ .about-main { padding:80px 3rem 74px; } }

.about-grid { display:flex; flex-direction:column; }
@media (min-width:1024px){ .about-grid { flex-direction:column; } }

// Who are we section
.about-who {
	width:100%;
	max-width:864px;
	margin:0 auto 82px;
	padding-right:0;
	text-align:center;
	display:flex;
	flex-direction:column;
	align-items:center;

	h2 { font-family:$font-base; font-size:40px; font-weight:700; line-height:125%; margin:0 0 1.25rem; color:$color-dark-strong; }
	p { font-family:$font-base; font-size:20px; font-weight:400; line-height:140%; color:$color-dark-strong; max-width:864px; font-feature-settings:'liga' off,'clig' off; }
	p + p { margin-top:20px; }
	&__emphasis { font-weight:700; color:$color-dark-strong; font-feature-settings:'liga' off,'clig' off; }
	&__cta { margin-top:32px; }
}

/* Align 'Who are we' width with foundation/story components on tablet */
@media (max-width:1023.98px){
	.about-who { max-width:563px; margin:0 auto 72px; padding:0 16px; }
	.about-who p { max-width:100%; }
}

/* Very small / single-column alignment (matches single foundation card width) */
@media (max-width:604px){
	.about-who {  margin:0 auto 64px; padding:0; }
}

// Outline green button variant (page specific spec)
.btn-outline-green {
	display:inline-flex;
	align-items:center;
	justify-content:center;
	height:48px;
	padding:14px 32px;
	font-size:16px;
	line-height:20px;
	border:2px solid $color-green-dark;
	border-radius:999px;
	font-weight:600;
	color:$color-green-dark;
	text-decoration:none;
	transition:.3s;
	gap:0;
	background:transparent;
	&:hover { background:$color-green-dark; color:$color-white; }
}

// Story (zig-zag) section
.about-story-wrapper {
	background:$color-bg-light-soft;
	width:100vw;
	position:relative;
	left:50%; right:50%;
	margin-left:-50vw; margin-right:-50vw;
}

.about-story { width:100%; background:transparent; }

.zz-item {
	display:flex;
	flex-direction:column;
	gap:2rem;
	margin-bottom:4rem;
	&__media { width:100%; height:320px; border-radius:24px; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,.15); img { width:100%; height:100%; object-fit:cover; } }
	&__body { width:100%; display:flex; flex-direction:column; justify-content:center; gap:1rem; }
	&__title { font-size:1.75rem; font-weight:700; color:$color-bodytext; }
	&__text { color:$color-dark-medium; line-height:1.6; }
	@media (min-width:1024px){
		flex-direction:row; align-items:center;
		&__media { width:50%; }
		&__body { width:50%; }
		&--rev { flex-direction:row-reverse; }
	}
}

// Foundations section
// Foundations block layout (spec: gap 32px above, internal flex w/ gap 40px)

.foundation {
	margin-top:2rem; // 32px gap from previous section
	display:flex;
	flex-direction:column;
	align-items:center;
	align-self:stretch;
	gap:40px;
	padding:80px 0 0; // top 80px, bottom 56px
	/* Use auto height so additional rows (2x2) expand naturally */
	height:auto;
	width:100%;

	/* Heading centered and width-aligned with grid for consistent vertical stack */
	h2 { text-align:center; font-weight:700; font-size:2.25rem; color:$color-bodytext; margin:0; width:100%; max-width:1311px; }
	&__grid { display:grid; gap:33px; grid-template-columns:repeat(auto-fit,minmax(255px,1fr)); max-width:1311px; margin:0 auto; }
	/* Force grid to respect viewport width and not expand based on intrinsic track sizing */
	&__grid { width:100%; box-sizing:border-box; }
	&__card { text-align:center; display:flex; flex-direction:column; align-items:center; gap:1rem; margin:24px; width:255px; box-sizing:border-box; }
	&__icon { width:96px; height:96px; border-radius:50%; background:rgba($color-green-dark,0.10); display:flex; align-items:center; justify-content:center; margin-bottom:.5rem; }
	&__title { font-weight:700; font-size:1.25rem; color:$color-bodytext; }
	&__text { font-size:.95rem; color:$color-dark-medium; line-height:1.55; width:255px; max-width:255px; max-height:93px; margin:0 auto; }
	&__share { text-align:center; }
}

// Responsive adjustments for Foundations (improve flexibility on very small screens)
@media (max-width: 900px) {
	.foundation { padding:72px 0 56px; }
}

@media (max-width: 640px) {
	.foundation { padding:64px 0 52px; }
	.foundation__grid { gap:33px; grid-template-columns:repeat(auto-fit,minmax(255px,1fr)); width:100%; max-width:100%; justify-content:center; }
	.foundation__icon { width:84px; height:84px; }
	.foundation__title { font-size:1.15rem; }
	.foundation__text { font-size:0.9rem; }
}

@media (max-width: 480px) {
	.foundation { padding:56px 0 48px; }
	.foundation__grid { gap:33px; grid-template-columns:repeat(auto-fit,minmax(255px,1fr)); width:100%; max-width:100%; justify-content:center; }
	.foundation__icon { width:72px; height:72px; }
	.foundation__title { font-size:1.05rem; }
	.foundation__text { font-size:0.85rem; }
}

@media (max-width: 360px) {
	// Single column; card already 255px so allow horizontal scroll if viewport narrower
	.foundation__grid { grid-template-columns:repeat(auto-fit,minmax(255px,1fr)); gap:33px; max-width:100%; width:100%; justify-content:center; }
	.foundation__card { width:255px; }
	.foundation__icon { width:64px; height:64px; }
}

@media (max-width: 320px) {
	.foundation { padding:48px 0 44px; }
	.foundation__grid { gap:33px; max-width:100%; width:100%; }
	.foundation__card { width:255px; }
}

// Share Button (could reuse btn-outline-green but distinct color spec provided)
.share-btn {
	display:inline-flex; max-height: 56px; align-items:center; padding:1rem 1.75rem; border:2px solid #41620F; border-radius:999px; font-weight:700; color:#41620F; transition:.3s; background:transparent; cursor:pointer;
	img { margin-right:.5rem; width:20px; height:20px; }
	&:hover { background:#41620F; color:#fff; }
}

// Structured story blocks (new layout) -------------------------------------------------
.story-block {
	display:flex;
	flex-direction:column;
	align-items:flex-start;
	gap:24px;
	padding:64px 0 56px;
	align-self:stretch;
	&--b { padding:56px 0 64px; }

	&__row {
		display:flex;
		width:100%;
		max-width:1315px;
		align-items:center;
		margin:0 auto;
		&--a { gap:33px; }
		&--b { gap:16px; }
	}

	&__text { flex:1; display:flex; flex-direction:column; gap:24px; }
	&__title { font-size:1.75rem; font-weight:700; color:$color-bodytext; margin:0; }
	&__body { color:$color-dark-medium; line-height:1.6; font-size:1rem; }
	&__cta { margin-top:4px; }
	&__media { flex:1; display:flex; justify-content:center; align-items:center; }
	&__media img { width:100%; height:100%; object-fit:cover; border-radius:24px; box-shadow:0 2px 6px rgba(0,0,0,.15); }
}

// Variant-specific overrides per design spec
.story-block--a {
	.story-block__text {
		display:flex;
		/* Replaced fixed width with flexible max-width; allows shrink on narrow screens */
		max-width:607px;
		width:100%;
		padding-left:32px;
		flex-direction:column;
		justify-content:center;
		align-items:flex-start;
		gap:32px;
		flex:1 1 auto;
	}
}

.story-block--b {
	.story-block__text {
		display:flex;
		max-width:641px;
		width:100%;
		padding-left:32px;
		flex-direction:column;
		align-items:flex-start;
		gap:16px;
		flex:1 1 auto;
	}
}

/* Fixed media dimensions on desktop: 640x399 (maintain aspect/crop) */
@media (min-width:1024px){
	.story-block__media { flex:0 0 640px; max-width:640px; height:399px; }
	.story-block__media img { width:640px; height:399px; object-fit:cover; }
}

// Shared typography overrides for titles & body inside story blocks (spec H3, Body L)
.story-block__title {
	font-family:$font-base;
	font-size:32px;
	font-weight:700;
	line-height:125%;
	color:$color-dark-strong;
	font-feature-settings:'liga' off,'clig' off;
	align-self:stretch;
}

.story-block__body {
	font-family:$font-base;
	font-size:18px;
	line-height:140%;
	font-weight:400;
	color:$color-dark-strong;
	font-feature-settings:'liga' off,'clig' off;
	/* Flexible width: shrinks below design max without causing horizontal scroll */
	max-width:562px;
	width:100%;
	/* Fluid cap to better adapt mid breakpoints */
	max-width:clamp(260px, 55vw, 562px);
}

// CTA button inside story blocks (ensures spec layout without affecting global button usage)
.story-block__cta.btn-outline-green {
	display:flex;
	height:48px;
	padding:14px 32px;
	flex-direction:column;
	justify-content:center;
	align-items:center;
	gap:0;
	border-radius:999px;
	border:2px solid $color-green-dark;
}

// Ensure paragraph/body widths collapse on small screens to avoid overflow
@media (max-width:1023.98px) {
	.story-block--a .story-block__text,
	.story-block--b .story-block__text { width:100%; padding-left:0; }
	.story-block__body { width:100%; max-width:100%; }
}

@media (max-width:1023.98px) {
	.story-block {
		padding:48px 0; // reduce vertical spacing mobile
		&--b { padding:48px 0; }
		&__row { flex-direction:column; gap:24px; }
		&__media img { height:280px; }
	}
	/* Reorder variant B so text appears above image when stacked */
	.story-block--b .story-block__row { display:flex; }
	.story-block--b .story-block__row > .story-block__text { order:1; }
	.story-block--b .story-block__row > .story-block__media { order:2; }
}

/* Tablet range: enforce 2x2 (only below 1024px) */
@media (min-width:699px) and (max-width:1023.98px){
	.foundation__grid { 
		grid-template-columns:repeat(2, 298px) !important;
		max-width:(2 * 298px) + 33px; // 643px
		margin:0 auto;
		justify-content:center;
	}
	.foundation > h2 { max-width:543px; white-space:nowrap; }
}

@media (max-width: 1439px) {
	.about-story,
	.about-who {
		&__grid { display:grid; gap:33px; grid-template-columns:repeat(auto-fit,minmax(255px,1fr)); max-width:1315px; margin:0 auto; }
		padding: 0 20px 0 20px;
	}
}

// Desktop (>=1024px): always 4 in a straight line
@media (min-width:1024px) {
	.foundation__grid { grid-template-columns:repeat(4,255px); gap:33px; max-width:1311px; margin:0 auto; justify-content:center; }
}

/* Narrow desktop band (1024px–1199.98px): shrink card/text width & gap so 4-up fits viewport (4*238 + 3*24 = 1024) */
@media (min-width:1024px) and (max-width:1199.98px){
	.foundation__grid { grid-template-columns:repeat(4,238px); gap:4px; max-width:1024px; }
	.foundation__card { width:238px; margin:16px; }
	.foundation__text { width:238px; max-width:238px; }
	.foundation__icon { width:88px; height:88px; }
	.foundation > h2 { max-width:1024px; }
}

// (Removed) legacy rule for old static language indicator chevron

// Ensure mobile-specific elements stay hidden on desktop (defensive override)
@media (min-width:1024px){
	.page-about .header__overlay { display:none !important; }
	.page-about .header__mobile { display:none !important; }
}

/* Phone centering: when stacked (<=604px) force a single fixed-width column centered */
@media (max-width:604px){
	.foundation__grid { grid-template-columns:repeat(1,255px) !important; justify-content:center; }
	.foundation__card { width:255px; margin:16px 0; }
	.foundation__text { width:255px; max-width:255px; }
	/* Allow heading to span full width and shrink font so it fits on one line */
	.foundation > h2 { 
		max-width:100%; 
		padding:0 16px; 
		white-space:nowrap; 
		font-size:clamp(24px, 7.2vw, 32px); 
		/* Prevent horizontal scroll if extremely narrow */
		overflow:hidden; 
		text-overflow:ellipsis; 
	}
}

