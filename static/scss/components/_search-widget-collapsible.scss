// Collapsible search widget for tablet and mobile views
// This component extends the search widget with collapsible functionality

// Filter toggle button (only shows on tablet and below)
.searchw__filter-toggle {
  display: none;
  align-items: center;
  justify-content: center;
  padding: 12px;
  margin-bottom: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
  
  &--active {
    .searchw__toggle-icon {
      svg {
        transform: rotate(180deg);
      }
    }
  }
}

.searchw__toggle-icon {
  display: flex;
  align-items: center;
  
  svg {
    transition: transform 0.3s ease;
    
    path {
      fill: #000; // Make the icon black
    }
  }
  
  span {
    display: none; // Hide the text
  }
}

// Mobile-first view (always visible)
.searchw__mobile-first {
  display: flex;
  gap: 2px;
  width: 100%;
}

// Advanced search options (hidden on mobile by default)
.searchw__advanced {
  display: block;
}

// Submit button styles specific to mobile/desktop
.searchw__submit {
  &--mobile {
    min-width: 130px;
  }
}

// Desktop submit button
.searchw__submit--desktop {
  width: auto; // Ensure proper width in desktop mode
}

// Tablet and below styles
@media (max-width: 768px) {
  // Position search widget inside hero for mobile view
  .section.search-widget {
    bottom: 200px;
    left: 0;
    right: 0;
    z-index: 49;
    padding: 0 16px;
    margin-top: 0;
    
    .search-widget__container {
      margin: 0;
      padding: 0;
    }
    
    .searchw--panel {
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
    }
  }
  
  .searchw {
    display:flex;
    flex-direction:column-reverse; // so advanced panel visually grows upward
    position:relative;

    .searchw__filter-toggle {
      display: flex;
      padding: 0;
      order:3; // keep toggle at visual bottom (since column-reverse)
    }

    .searchw__mobile-first {
      display:flex;
      order:2;
    }

    .searchw__advanced {
      order:1;
      overflow:hidden;
      max-height:0; // collapsed
      opacity:0;
      transform:translateY(8px); // subtle slide
      transition:max-height .45s ease, opacity .35s ease, transform .45s ease;
      will-change:max-height, opacity, transform;
      margin-top:0; // we animate internally
    }

    .searchw__submit--desktop { display:none; }

    &.searchw--expanded {
      .searchw__advanced {
        max-height:1400px; // sufficiently large to reveal all content
        opacity:1;
        transform:translateY(0);
        padding-top:12px; // spacing appears only when open
      }
      .searchw__submit--mobile { display:none; }
      .searchw__submit--desktop {
        display:flex;
        width:100%;
        margin-top:4px;
      }
    }
  }
  
  // Adjust field layouts for mobile
  .searchw__mobile-first {
    flex-wrap: wrap;
    
    .searchw__field {
      flex: 1 1 auto;
      min-width: 0;
    }
    
    .searchw__submit--mobile {
      flex: 0 0 auto;
    }
  }
  
  // Stack fields in the expanded view
  .searchw__advanced {
    .searchw__group--row1,
    .searchw__group--row2 {
      flex-direction: column;
      gap: 6px;
    }
    
    .searchw__field,
    .searchw__field--narrow {
      width: 100%;
      flex: 1 1 auto;
    }
  }
}

// Desktop styles - hide mobile elements
@media (min-width: 769px) {
  .searchw__filter-toggle {
    display: none !important;
  }
  
  .searchw__mobile-first {
    display: none !important;
  }
  
  .searchw__advanced {
    display: block !important;
  }
  
  .searchw__submit--mobile {
    display: none !important;
  }
  
  .searchw__submit--desktop {
    display: flex !important;
  }
}